<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>YouTube Master - V18 Fix</title>
    <style>
        :root { --yt-red: #ff0000; --bg: #f4f4f4; --blue: #065fd4; --green: #28a745; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; color: white; flex-direction: column; justify-content: center; align-items: center; z-index: 10000; text-align: center; }
        .btn { padding: 12px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin: 5px; color: white; }
        input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; }
        
        .panel { display: none; border-radius: 15px; padding: 20px; margin-top: 20px; border: 2px solid #ddd; }
        .card { background: #f9f9f9; padding: 10px; border-radius: 8px; margin-top: 5px; border: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        #bug-console { background: #1e1e1e; color: #00ff00; font-family: monospace; padding: 15px; border-radius: 10px; margin-top: 10px; display: none; text-align: left; }
    </style>
</head>
<body>

<div id="ban-screen" class="overlay">
    <h1 style="color:red;">‚ö†Ô∏è VOC√ä FOI BANIDO</h1>
    <p>O Administrador removeu seu acesso ao sistema.</p>
    <button class="btn" style="background:#444" onclick="location.reload()">Voltar</button>
</div>

<div class="container" id="main-ui">
    <h2 style="text-align:center; color:var(--yt-red)">YOUTUBE <span style="color:#333">SYSTEM V18</span></h2>

    <div id="login-box">
        <input type="text" id="u-name" placeholder="Usu√°rio">
        <input type="password" id="u-pass" placeholder="Senha">
        <button class="btn" style="background:var(--blue); width:100%" onclick="entrar()">ENTRAR</button>
    </div>

    <div id="app" style="display:none;">
        <div id="user-tag" style="text-align:center; margin-bottom:15px; font-weight:bold;"></div>

        <div style="background: #eee; padding: 15px; border-radius: 10px;">
            <h4>üîç Pesquisar Canal</h4>
            <input type="text" id="search-input" placeholder="Nome do canal...">
            <button class="btn" style="background:var(--yt-red)" onclick="pesquisar()">Buscar</button>
            <div id="search-res" style="display:none; margin-top:10px; border-top: 1px solid #ccc; pt-10px;">
                <p>Canal: <b id="res-name"></b> | Subs: <b id="res-subs"></b></p>
                <button class="btn" style="background:#333" onclick="inscrever()">Inscrever-se</button>
            </div>
        </div>

        <div id="admin-panel" class="panel" style="border-color: red;">
            <h4 style="color:red;">üõ† PAINEL MASTER (ADMIN)</h4>
            <input type="text" id="ban-alvo" placeholder="Nome do usu√°rio para BANIR">
            <button class="btn" style="background:black; width:100%" onclick="aplicarBan()">APLICAR BANIMENTO AGORA</button>
            <hr>
            <p>Usu√°rios no Sistema:</p>
            <div id="user-list"></div>
        </div>

        <div id="support-panel" class="panel" style="border-color: var(--green);">
            <h4 style="color:var(--green);">üõ† DIAGN√ìSTICO (SUPORTE)</h4>
            <button class="btn" style="background:var(--green); width:100%" onclick="testarBugs()">ESCANEAR ERROS</button>
            <div id="bug-console"></div>
        </div>

        <button class="btn" style="background:#666; width:100%; margin-top:20px;" onclick="location.reload()">Sair</button>
    </div>
</div>

<script>
    let logado = "";
    let alvoBusca = "";

    // BANCO DE DADOS √öNICO E CORRIGIDO
    function getDB() {
        return JSON.parse(localStorage.getItem('yt_final_db')) || { 
            usuarios: ["admin", "suporte"], 
            banidos: [], 
            subs: {"admin": 11000000, "suporte": 500} 
        };
    }

    function saveDB(db) { localStorage.setItem('yt_final_db', JSON.stringify(db)); }

    function entrar() {
        const u = document.getElementById('u-name').value.trim().toLowerCase();
        const p = document.getElementById('u-pass').value.trim();
        let db = getDB();

        if(!u) return;

        // VERIFICA SE EST√Å BANIDO
        if(db.banidos.includes(u)) {
            document.getElementById('main-ui').style.display = 'none';
            document.getElementById('ban-screen').style.display = 'flex';
            return;
        }

        logado = u;
        if(!db.usuarios.includes(u)) {
            db.usuarios.push(u);
            db.subs[u] = 0;
            saveDB(db);
        }

        document.getElementById('login-box').style.display = 'none';
        document.getElementById('app').style.display = 'block';
        document.getElementById('user-tag').innerText = "CONTA: " + u.toUpperCase();

        // MOSTRAR PAIN√âIS S√ì PARA QUEM TEM PERMISS√ÉO
        if(u === "admin") {
            document.getElementById('admin-panel').style.display = 'block';
        } 
        if(u === "suporte") {
            document.getElementById('support-panel').style.display = 'block';
        }
        
        atualizarListas();
    }

    function pesquisar() {
        let db = getDB();
        let busca = document.getElementById('search-input').value.trim().toLowerCase();
        if(db.usuarios.includes(busca)) {
            alvoBusca = busca;
            document.getElementById('search-res').style.display = 'block';
            document.getElementById('res-name').innerText = busca;
            document.getElementById('res-subs').innerText = db.subs[busca].toLocaleString();
        } else {
            alert("Canal n√£o encontrado!");
        }
    }

    function inscrever() {
        let db = getDB();
        db.subs[alvoBusca]++;
        saveDB(db);
        document.getElementById('res-subs').innerText = db.subs[alvoBusca].toLocaleString();
        atualizarListas();
    }

    function aplicarBan() {
        let db = getDB();
        let alvo = document.getElementById('ban-alvo').value.trim().toLowerCase();
        
        if(alvo === "admin") return alert("Voc√™ n√£o pode banir o dono!");
        
        if(db.usuarios.includes(alvo)) {
            db.banidos.push(alvo);
            saveDB(db);
            alert("USU√ÅRIO " + alvo + " BANIDO COM SUCESSO!");
            document.getElementById('ban-alvo').value = "";
            atualizarListas();
        } else {
            alert("Usu√°rio n√£o existe.");
        }
    }

    function testarBugs() {
        let console = document.getElementById('bug-console');
        console.style.display = 'block';
        console.innerHTML = "> Testando permiss√µes... [OK]<br>> Verificando Database... [OK]<br>> Limpando Cache... [OK]<br>> SISTEMA PROTEGIDO!";
    }

    function atualizarListas() {
        let db = getDB();
        if(logado === "admin") {
            document.getElementById('user-list').innerHTML = db.usuarios.map(u => `
                <div class="card">
                    <span>üë§ ${u}</span>
                    <span>${db.subs[u]} subs ${db.banidos.includes(u) ? '<b style="color:red">[BANIDO]</b>' : ''}</span>
                </div>
            `).join('');
        }
    }
</script>
</body>
</html>
